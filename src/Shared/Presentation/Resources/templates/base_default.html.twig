{# @var TwigHelperService \App\Shared\Presentation\Service\TwigHelperService #}

<!DOCTYPE html>
<html class="bg-white w-full p-0 m-0" lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        {% block metatags %}{% endblock %}

        <title>Fyyn — {% block title %}Welcome!{% endblock %}</title>

        {{ include('@shared/includes/cookiebot_script.html.twig') }}

        {{ encore_entry_link_tags('app') }}
        {{ encore_entry_link_tags('tailwind') }}

        {% block stylesheets %}{% endblock %}


        {{ encore_entry_script_tags('app') }}

        {% block javascripts %}{% endblock %}
    </head>
    <body class="bg-white h-full w-full p-0 m-0">

        <div class="min-h-screen flex flex-col w-full">
            <header class="flex flex-row justify-end absolute right-0 -top-1">
                <a href="/">
                    <div
                            class="
                                flex flex-row gap-2 justify-end items-end
                                p-4 pr-4 pl-4 rounded-bl-md
                                w-fit
                                opacity-20
                                hover:opacity-100
                                bg-neutral-500
                                hover:bg-mercurius-blue-600
                                text-neutral-300
                                hover:text-white
                                font-semibold
                            "
                    >
                        <span>Fyyn.io</span>
                        <img
                                class="h-6"
                                src="{{ asset('assets/images/fyyn-logo-240x241.png') }}"
                                alt="Fyyn.io"
                        >
                    </div>
                </a>
            </header>


            <div class="flex flex-col flex-grow mx-auto w-full {% block mainWrapperClasses %}max-w-8xl{% endblock %}">

                <main class="mb-auto">

                    {% for label, messages in app.flashes %}
                        {% for message in messages %}
                            <div class="pl-1 sm:pl-4 pr-1 sm:pr-4">
                                <div class="
                                        {% apply spaceless %}
                                            rounded-md
                                            p-8
                                            m-4
                                            sm:m-8
                                            text-lg
                                            font-normal
                                            border-1
                                            {% if label is same as 'success' %} bg-mercurius-green-100 text-mercurius-green-900 border-mercurius-green-500{% endif %}
                                            {% if label is same as 'info' %} bg-mercurius-blue-100 text-mercurius-blue-900 text-mercurius-blue-500 {% endif %}
                                            {% if label is same as 'warning' %} bg-orange-50 text-orange-600 border-orange-300{% endif %}
                                            {% if label is same as 'danger' %} bg-red-100 text-red-900 border-red-500 {% endif %}
                                        {% endapply %}
                                     "
                                >
                                    {{ message }}
                                </div>
                            </div>
                        {% endfor %}
                    {% endfor %}

                    {% block body %}{% endblock %}
                </main>

                <footer class="padded-content-box">
                    <div
                            class="
                                mt-32
                                bg-neutral-100 rounded-lg
                                min-h-max w-full bottom-0 p-6 pb-8
                                lg:flex lg:items-center lg:justify-between
                                font-extralight
                                text-neutral-500 text-sm
                            "
                    >
                        <ul class="flex flex-wrap items-center mt-3 mr-6">
                            <li>
                                © {{ "now"|date("Y") }} smart DSGVO GmbH
                            </li>
                        </ul>

                        <ul class="flex flex-wrap items-center mt-3 mr-6">
                            <li>
                                <a href="{{ path(app.request.attributes.get('_route'), app.request.attributes.get('_route_params')|merge(app.request.query.all)|merge({ _locale: 'en'})) }}" class="mr-4 hover:underline md:mr-6 ">{{ 'footernav.english'|trans }}</a>
                            </li>
                            <li>
                                <a href="{{ path(app.request.attributes.get('_route'), app.request.attributes.get('_route_params')|merge(app.request.query.all)|merge({ _locale: 'de'})) }}" class="mr-4 hover:underline md:mr-6">{{ 'footernav.german'|trans }}</a>
                            </li>
                        </ul>

                        <ul class="flex flex-wrap items-center mt-3">
                            <li>
                                <a
                                        {% if app.request.locale is same as 'de' %}
                                            href="https://help.fyyn.io/knowledge-base/datenschutzerklarung/"
                                        {% else %}
                                            href="https://help.fyyn.io/knowledge-base/privacy-policy/"
                                        {% endif %}

                                        class="mr-4 hover:underline md:mr-6"
                                >
                                    {{ 'footernav.privacy_policy'|trans }}
                                </a>
                            </li>
                            <li>
                                <a
                                        {% if app.request.locale is same as 'de' %}
                                            href="https://help.fyyn.io/knowledge-base/impressum/"
                                        {% else %}
                                            href="https://help.fyyn.io/knowledge-base/imprint-site-notice/"
                                        {% endif %}

                                        class="mr-4 hover:underline md:mr-6"
                                >
                                    {{ 'footernav.imprint'|trans }}
                                </a>
                            </li>
                            <li>
                                <a
                                        href="{{ path('shared.presentation.contentpages.cookie_settings') }}"
                                        class="mr-4 hover:underline md:mr-6"
                                >
                                    {{ 'footernav.cookie_settings'|trans }}
                                </a>
                            </li>

                            {% if app.user is defined
                                and app.user is not null
                                and app.user.registered
                            %}
                                <li>
                                    <form
                                            action="{{ path('videobasedmarketing.account.infrastructure.sign_out') }}"
                                            method="post"
                                    >
                                        <button
                                                type="submit"
                                                class="mr-4 hover:underline md:mr-6"
                                        >
                                            {{ 'footernav.sign_out'|trans }}
                                        </button>
                                    </form>
                                </li>
                            {% endif %}

                            {% if app.user is not defined
                                or app.user is null
                                or app.user.unregistered
                            %}
                                <li>
                                    <a
                                            href="{{ path('videobasedmarketing.account.presentation.sign_in') }}"
                                            class="mr-4 hover:underline md:mr-6"
                                            data-test-id="footerSignInCta"
                                    >
                                        {{ 'footernav.sign_in'|trans }}
                                    </a>
                                </li>

                                <li>
                                    <a
                                            href="{{ path('videobasedmarketing.account.presentation.sign_up') }}"
                                            class="mr-4 hover:underline md:mr-6"
                                            data-test-id="footerSignUpCta"

                                    >
                                            {{ 'footernav.sign_up'|trans }}
                                    </a>
                                </li>
                            {% endif %}

                            {% if app.user is defined
                                and app.user is not null
                                and TwigHelperService.capabilitiesService.canAdministerVideos(app.user)
                            %}
                                <li>
                                    <a
                                            href="{{ path('videobasedmarketing.recordings.presentation.admin.videos.overview') }}"
                                            class="mr-4 hover:underline md:mr-6 text-red-700 font-semibold"
                                    >
                                        Admin
                                    </a>
                                </li>
                            {% endif %}
                        </ul>
                    </div>

                    {% if TwigHelperService.symfonyEnv is not same as 'prod' %}
                        <div class="font-mono text-neutral-400 text-xs mt-4 text-right">
                            Symfony env: {{ TwigHelperService.symfonyEnv }}
                        </div>
                    {% endif %}

                </footer>

            </div>
        </div>

    </body>
</html>
