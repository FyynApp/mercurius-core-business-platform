{# @var this \App\VideoBasedMarketing\Recordings\Presentation\Component\VideoPlayerEmbeddedLiveComponent #}
{# @var TwigHelperService \App\Shared\Presentation\Service\TwigHelperService #}

{% trans_default_domain 'videobasedmarketing.recordings' %}

<div
        class="relative"

        {{ attributes }}

        {% if not this.video.fullAssetAvailable %}
            data-poll
        {% endif %}
>

    {% if this.video.fullAssetAvailable %}

        <link href="https://vjs.zencdn.net/7.20.3/video-js.css" rel="stylesheet" />

        <style>
            .video-js .vjs-menu-button-inline.vjs-slider-active,.video-js .vjs-menu-button-inline:focus,.video-js .vjs-menu-button-inline:hover,.video-js.vjs-no-flex .vjs-menu-button-inline {
                width: 10em
            }

            .video-js .vjs-controls-disabled .vjs-big-play-button {
                display: none!important
            }

            .video-js .vjs-control {
                width: 3em
            }

            .video-js .vjs-menu-button-inline:before {
                width: 1.5em
            }

            .vjs-menu-button-inline .vjs-menu {
                left: 3em
            }

            .vjs-paused.vjs-has-started.video-js .vjs-big-play-button,.video-js.vjs-ended .vjs-big-play-button,.video-js.vjs-paused .vjs-big-play-button {
                display: block
            }

            .video-js .vjs-load-progress div,.vjs-seeking .vjs-big-play-button,.vjs-waiting .vjs-big-play-button {
                display: none!important
            }

            .video-js .vjs-mouse-display:after,.video-js .vjs-play-progress:after {
                padding: 0 .4em .3em !important
            }

            .video-js.vjs-ended .vjs-loading-spinner {
                display: none;
            }

            .video-js.vjs-ended .vjs-big-play-button {
                display: block !important;
            }

            .video-js *,.video-js:after,.video-js:before {
                box-sizing: inherit;
                font-size: inherit;
                color: inherit;
                line-height: inherit
            }

            .video-js.vjs-fullscreen,.video-js.vjs-fullscreen .vjs-tech {
                width: 100%!important;
                height: 100%!important
            }

            .video-js {
                font-size: 14px;
                overflow: hidden
            }

            .video-js .vjs-control {
                color: inherit
            }

            .video-js .vjs-menu-button-inline:hover,.video-js.vjs-no-flex .vjs-menu-button-inline {
                width: 8.35em
            }

            .video-js .vjs-volume-menu-button.vjs-volume-menu-button-horizontal:hover .vjs-menu .vjs-menu-content {
                height: 3em;
                width: 6.35em
            }

            .video-js .vjs-control:focus:before,.video-js .vjs-control:hover:before {
                text-shadow: 0 0 1em #fff,0 0 1em #fff,0 0 1em #fff
            }

            .video-js .vjs-spacer,.video-js .vjs-time-control {
                display: -webkit-box;
                display: -moz-box;
                display: -ms-flexbox;
                display: -webkit-flex;
                display: flex;
                -webkit-box-flex: 1 1 auto;
                -moz-box-flex: 1 1 auto;
                -webkit-flex: 1 1 auto;
                -ms-flex: 1 1 auto;
                flex: 1 1 auto
            }

            .video-js .vjs-time-control {
                -webkit-box-flex: 0 1 auto;
                -moz-box-flex: 0 1 auto;
                -webkit-flex: 0 1 auto;
                -ms-flex: 0 1 auto;
                flex: 0 1 auto;
                width: auto
            }

            .video-js .vjs-time-control.vjs-time-divider {
                width: 14px
            }

            .video-js .vjs-time-control.vjs-time-divider div {
                width: 100%;
                text-align: center
            }

            .video-js .vjs-time-control.vjs-current-time {
                margin-left: 1em
            }

            .video-js .vjs-time-control .vjs-current-time-display,.video-js .vjs-time-control .vjs-duration-display {
                width: 100%
            }

            .video-js .vjs-time-control .vjs-current-time-display {
                text-align: right
            }

            .video-js .vjs-time-control .vjs-duration-display {
                text-align: left
            }

            .video-js .vjs-play-progress:before,.video-js .vjs-progress-control .vjs-play-progress:before,.video-js .vjs-remaining-time,.video-js .vjs-volume-level:after,.video-js .vjs-volume-level:before,.video-js.vjs-live .vjs-time-control.vjs-current-time,.video-js.vjs-live .vjs-time-control.vjs-duration,.video-js.vjs-live .vjs-time-control.vjs-time-divider,.video-js.vjs-no-flex .vjs-time-control.vjs-remaining-time {
                display: none
            }

            .video-js.vjs-no-flex .vjs-time-control {
                display: table-cell;
                width: 4em
            }

            .video-js .vjs-progress-control {
                position: absolute;
                left: 0;
                right: 0;
                width: 100%;
                height: .5em;
                top: -.5em
            }

            .video-js .vjs-progress-control .vjs-load-progress,.video-js .vjs-progress-control .vjs-play-progress,.video-js .vjs-progress-control .vjs-progress-holder {
                height: 100%
            }

            .video-js .vjs-progress-control .vjs-progress-holder {
                margin: 0
            }

            .video-js .vjs-progress-control:hover {
                height: 1.5em;
                top: -1.5em
            }

            .video-js .vjs-control-bar {
                -webkit-transition: -webkit-transform .1s ease 0s;
                -moz-transition: -moz-transform .1s ease 0s;
                -ms-transition: -ms-transform .1s ease 0s;
                -o-transition: -o-transform .1s ease 0s;
                transition: transform .1s ease 0s
            }

            .video-js.not-hover.vjs-has-started.vjs-paused.vjs-user-active .vjs-control-bar,.video-js.not-hover.vjs-has-started.vjs-paused.vjs-user-inactive .vjs-control-bar,.video-js.not-hover.vjs-has-started.vjs-playing.vjs-user-active .vjs-control-bar,.video-js.not-hover.vjs-has-started.vjs-playing.vjs-user-inactive .vjs-control-bar,.video-js.vjs-has-started.vjs-playing.vjs-user-inactive .vjs-control-bar {
                visibility: visible;
                opacity: 1;
                -webkit-backface-visibility: hidden;
                -webkit-transform: translateY(3em);
                -moz-transform: translateY(3em);
                -ms-transform: translateY(3em);
                -o-transform: translateY(3em);
                transform: translateY(3em);
                -webkit-transition: -webkit-transform 1s ease 0s;
                -moz-transition: -moz-transform 1s ease 0s;
                -ms-transition: -ms-transform 1s ease 0s;
                -o-transition: -o-transform 1s ease 0s;
                transition: transform 1s ease 0s
            }

            .video-js.not-hover.vjs-has-started.vjs-paused.vjs-user-active .vjs-progress-control,.video-js.not-hover.vjs-has-started.vjs-paused.vjs-user-inactive .vjs-progress-control,.video-js.not-hover.vjs-has-started.vjs-playing.vjs-user-active .vjs-progress-control,.video-js.not-hover.vjs-has-started.vjs-playing.vjs-user-inactive .vjs-progress-control,.video-js.vjs-has-started.vjs-playing.vjs-user-inactive .vjs-progress-control {
                height: .25em;
                top: -.25em;
                pointer-events: none;
                -webkit-transition: height 1s,top 1s;
                -moz-transition: height 1s,top 1s;
                -ms-transition: height 1s,top 1s;
                -o-transition: height 1s,top 1s;
                transition: height 1s,top 1s
            }

            .video-js.not-hover.vjs-has-started.vjs-paused.vjs-user-active.vjs-fullscreen .vjs-progress-control,.video-js.not-hover.vjs-has-started.vjs-paused.vjs-user-inactive.vjs-fullscreen .vjs-progress-control,.video-js.not-hover.vjs-has-started.vjs-playing.vjs-user-active.vjs-fullscreen .vjs-progress-control,.video-js.not-hover.vjs-has-started.vjs-playing.vjs-user-inactive.vjs-fullscreen .vjs-progress-control,.video-js.vjs-has-started.vjs-playing.vjs-user-inactive.vjs-fullscreen .vjs-progress-control {
                opacity: 0;
                -webkit-transition: opacity 1s ease 1s;
                -moz-transition: opacity 1s ease 1s;
                -ms-transition: opacity 1s ease 1s;
                -o-transition: opacity 1s ease 1s;
                transition: opacity 1s ease 1s
            }

            .video-js.vjs-live .vjs-live-control {
                margin-left: 1em
            }

            .video-js .vjs-big-play-button {
                top: 50%;
                left: 50%;
                margin-left: -1em;
                margin-top: -1em;
                width: 2em;
                height: 2em;
                line-height: 2em;
                border: none;
                border-radius: 50%;
                font-size: 3.5em;
                background-color: rgba(0,0,0,.45);
                color: #fff;
                -webkit-transition: border-color .4s,outline .4s,background-color .4s;
                -moz-transition: border-color .4s,outline .4s,background-color .4s;
                -ms-transition: border-color .4s,outline .4s,background-color .4s;
                -o-transition: border-color .4s,outline .4s,background-color .4s;
                transition: border-color .4s,outline .4s,background-color .4s
            }

            .video-js .vjs-menu-button-popup .vjs-menu {
                left: -3em
            }

            .video-js .vjs-menu-button-popup .vjs-menu .vjs-menu-content {
                background-color: transparent;
                width: 12em;
                left: -1.5em;
                padding-bottom: .5em
            }

            .video-js .vjs-menu-button-popup .vjs-menu .vjs-menu-item,.video-js .vjs-menu-button-popup .vjs-menu .vjs-menu-title {
                background-color: #151b17;
                margin: .3em 0;
                padding: .5em;
                border-radius: .3em
            }

            .video-js .vjs-menu-button-popup .vjs-menu .vjs-menu-item.vjs-selected {
                background-color: #009EEF;
            }

            .video-js .vjs-big-play-button {
                background-color: #FF7000;
                font-size: 2.5em;
                border-radius: 2px;
                height: 2em !important;
                line-height: 2em !important;
                margin-top: -1em !important
            }

            .video-js:hover .vjs-big-play-button,.video-js .vjs-big-play-button:focus,.video-js .vjs-big-play-button:active {
                background-color: #dc6100
            }

            .video-js .vjs-loading-spinner {
                border-color: #000000
            }

            .video-js .vjs-control-bar2 {
                background-color: #000
            }

            .video-js .vjs-control-bar {
                background-color: #000000 !important;
                color: #ffffff;
                font-size: 14px
            }

            .video-js .vjs-play-progress,.video-js  .vjs-volume-level {
                background-color: #009EEF;
            }

            .video-js.vjs-vjsdownload .vjs-button.vjs-vjsdownload{cursor:pointer;display:block;font-family:VideoJs}.video-js.vjs-vjsdownload .vjs-button.vjs-vjsdownload:before{display:block;position:relative;top:4px;content:'\f101';transform:rotate(90deg);font-size:1.5em}.video-js.vjs-vjsdownload .vjs-button.vjs-vjsdownload:after{display:block;content:' ';width:4px;height:5px;background-color:white;position:relative;top:-11px;left:calc(50% - 2px)}
        </style>

    <video
            id="my-video"
            class="video-js rounded-sm"
            controls
            preload="auto"
            width="1024"
            height="576"
            poster="{{ TwigHelperService.recordingsInfrastructureService.videoPosterStillAssetUrl(video) }}"
            data-setup="{}"

    >
        <source src="{{ TwigHelperService.recordingsInfrastructureService.videoFullAssetUrl(video) }}" type="video/mp4" />
        {#  <source src="MY_VIDEO.webm" type="video/webm" />#}
        <p class="vjs-no-js">
            To view this video please enable JavaScript, and consider upgrading to a
            web browser that supports HTML5 video
        </p>
    </video>

    <script src="https://vjs.zencdn.net/7.20.3/video.min.js"></script>

        <script>
            videojs('my-video').ready(function() {
                var img = this.controlBar.addChild('Component', {}, 0); // 3rd arg is index, i.e. first
                img.addClass("my-image");
            });
        </script>
        <style>
            .video-js .my-image {
                width: 100px;
                height: 40px;
                background: url(https://fyyn.io/fyyn-logo-player.jpg?12a) center center no-repeat;
            }
        </style>

{#
    <video
                class="mx-auto rounded-sm w-full"
                controls
                poster="{{ TwigHelperService.recordingsInfrastructureService.videoPosterStillAssetUrl(video) }}"
        >
            <source
                    src="{{ TwigHelperService.recordingsInfrastructureService.videoFullAssetUrl(video) }}"
            >
        </video>#}


    {% else %}

        <div
                class="
                    aspect-video w-full text-center text-lg text-neutral-800 flex flex-row justify-center items-center gap-1
                    bg-neutral-600 rounded-sm
                "
        >
            <span>{{ 'video_player_embedded.full_asset_outstanding'|trans }}</span>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-10 h-10 motion-safe:animate-spin-slow">
                <path d="M17.004 10.407c.138.435-.216.842-.672.842h-3.465a.75.75 0 01-.65-.375l-1.732-3c-.229-.396-.053-.907.393-1.004a5.252 5.252 0 016.126 3.537zM8.12 8.464c.307-.338.838-.235 1.066.16l1.732 3a.75.75 0 010 .75l-1.732 3.001c-.229.396-.76.498-1.067.16A5.231 5.231 0 016.75 12c0-1.362.519-2.603 1.37-3.536zM10.878 17.13c-.447-.097-.623-.608-.394-1.003l1.733-3.003a.75.75 0 01.65-.375h3.465c.457 0 .81.408.672.843a5.252 5.252 0 01-6.126 3.538z" />
                <path fill-rule="evenodd" d="M21 12.75a.75.75 0 000-1.5h-.783a8.22 8.22 0 00-.237-1.357l.734-.267a.75.75 0 10-.513-1.41l-.735.268a8.24 8.24 0 00-.689-1.191l.6-.504a.75.75 0 10-.964-1.149l-.6.504a8.3 8.3 0 00-1.054-.885l.391-.678a.75.75 0 10-1.299-.75l-.39.677a8.188 8.188 0 00-1.295-.471l.136-.77a.75.75 0 00-1.477-.26l-.136.77a8.364 8.364 0 00-1.377 0l-.136-.77a.75.75 0 10-1.477.26l.136.77c-.448.121-.88.28-1.294.47l-.39-.676a.75.75 0 00-1.3.75l.392.678a8.29 8.29 0 00-1.054.885l-.6-.504a.75.75 0 00-.965 1.149l.6.503a8.243 8.243 0 00-.689 1.192L3.8 8.217a.75.75 0 10-.513 1.41l.735.267a8.222 8.222 0 00-.238 1.355h-.783a.75.75 0 000 1.5h.783c.042.464.122.917.238 1.356l-.735.268a.75.75 0 10.513 1.41l.735-.268c.197.417.428.816.69 1.192l-.6.504a.75.75 0 10.963 1.149l.601-.505c.326.323.679.62 1.054.885l-.392.68a.75.75 0 101.3.75l.39-.679c.414.192.847.35 1.294.471l-.136.771a.75.75 0 101.477.26l.137-.772a8.376 8.376 0 001.376 0l.136.773a.75.75 0 101.477-.26l-.136-.772a8.19 8.19 0 001.294-.47l.391.677a.75.75 0 101.3-.75l-.393-.679a8.282 8.282 0 001.054-.885l.601.504a.75.75 0 10.964-1.15l-.6-.503a8.24 8.24 0 00.69-1.191l.735.268a.75.75 0 10.512-1.41l-.734-.268c.115-.438.195-.892.237-1.356h.784zm-2.657-3.06a6.744 6.744 0 00-1.19-2.053 6.784 6.784 0 00-1.82-1.51A6.704 6.704 0 0012 5.25a6.801 6.801 0 00-1.225.111 6.7 6.7 0 00-2.15.792 6.784 6.784 0 00-2.952 3.489.758.758 0 01-.036.099A6.74 6.74 0 005.251 12a6.739 6.739 0 003.355 5.835l.01.006.01.005a6.706 6.706 0 002.203.802c.007 0 .014.002.021.004a6.792 6.792 0 002.301 0l.022-.004a6.707 6.707 0 002.228-.816 6.781 6.781 0 001.762-1.483l.009-.01.009-.012a6.744 6.744 0 001.18-2.064c.253-.708.39-1.47.39-2.264a6.74 6.74 0 00-.408-2.308z" clip-rule="evenodd" />
            </svg>
        </div>
    {% endif %}

</div>
