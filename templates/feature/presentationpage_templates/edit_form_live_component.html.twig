{# @var this \App\Components\Feature\PresentationpageTemplates\PresentationspageTemplateEditFormLiveComponent #}
<div {{ attributes }}>

    {% embed 'embeds/two_column_content_box_content_row.html.twig' with { odd: false, colspanLeft: 7, colspanRight: 5 } %}

        {% block contentLeft %}

            <div class="mb-16">
                <div class="mb-8 font-bold text-xl">
                    {{ 'feature.presentationpage_templates.editor.edit_form.form_headline'|trans }}
                </div>


                <div class="mb-8">
                    <h2 class="text-lg mt-8 mb-4">
                        {{ 'feature.presentationpage_templates.editor.edit_form.subheadline_basesettings'|trans }}
                    </h2>

                    {% form_theme form 'form_themes/form_theme_default.html.twig' %}

                    {{ form_start(form) }}


                    {{ form_row(form.title, {
                        attr: {
                            'data-model': 'on(input)|debounce(250)|' ~ form.title.vars.full_name,
                            'data-action': 'live#action',
                            'data-action-name': "debounce(300)|save"
                        }
                    }) }}

                    {{ form_row(form.bgColor, {
                        attr: {
                            'data-model': 'on(input)|debounce(250)|' ~ form.bgColor.vars.full_name,
                            'data-action': 'live#action',
                            'data-action-name': "debounce(300)|save"
                        }
                    }) }}

                    {{ form_row(form.textColor, {
                        attr: {
                            'data-model': 'on(input)|debounce(250)|' ~ form.textColor.vars.full_name,
                            'data-action': 'live#action',
                            'data-action-name': "debounce(300)|save"
                        }
                    }) }}


                    <h2 class="text-lg mt-8 mb-4">
                        {{ 'feature.presentationpage_templates.editor.edit_form.subheadline_elements'|trans }}
                    </h2>

                    {% for elementForm in form.presentationpageTemplateElements %}

                        <div class="flex flex-row justify-start items-start shadow-inner p-4 pt-8 bg-indigo-50 mb-8 rounded-lg">

                            <div class="w-full mr-8">
                                {% for elementFormRow in elementForm %}

                                    {% if elementFormRow.vars.name is same as 'position' %}
                                        {{ form_row(elementFormRow) }}
                                    {% else %}
                                        <div class="mb-6">
                                            {{ form_label(elementFormRow) }}

                                            <div class="w-full">
                                                {{ form_widget(elementFormRow, {
                                                    attr: {
                                                        'data-model': 'on(input)|debounce(250)|' ~ elementFormRow.vars.full_name,
                                                        'data-action': 'live#action',
                                                        'data-action-name': "debounce(300)|save"
                                                    }
                                                }) }}
                                            </div>

                                            {{ form_help(elementFormRow) }}
                                            {{ form_errors(elementFormRow) }}
                                        </div>
                                    {% endif %}

                                {% endfor %}
                            </div>

                            {% if form.vars.valid %}

                                <div class="flex flex-row justify-end items-start w-20">
                                    <div class="flex flex-col justify-end">
                                        {% if elementForm.vars.value.position is not same as 0 %}
                                            <div>
                                                <button
                                                        class="p-0 ml-1 mr-0"
                                                        data-action="live#action"
                                                        data-action-name="moveElementUp(elementId={{ elementForm.vars.value.id }})"
                                                        type="button"
                                                >
                                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="ml-1 pt-1 pb-1 w-8 h-8">
                                                        <path fill-rule="evenodd" d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm.53 5.47a.75.75 0 00-1.06 0l-3 3a.75.75 0 101.06 1.06l1.72-1.72v5.69a.75.75 0 001.5 0v-5.69l1.72 1.72a.75.75 0 101.06-1.06l-3-3z" clip-rule="evenodd" />
                                                    </svg>
                                                </button>
                                            </div>
                                        {% endif %}

                                        {% if elementForm.vars.value.position is not same as (form.presentationpageTemplateElements|length - 1) %}
                                            <div>
                                                <button
                                                        class="p-0 ml-1 mr-0"
                                                        data-action="live#action"
                                                        data-action-name="moveElementDown(elementId={{ elementForm.vars.value.id }})"
                                                        type="button"
                                                        title=""
                                                >
                                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="ml-1 mr-0 pt-1 pb-1 w-8 h-8">
                                                        <path fill-rule="evenodd" d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm-.53 14.03a.75.75 0 001.06 0l3-3a.75.75 0 10-1.06-1.06l-1.72 1.72V8.25a.75.75 0 00-1.5 0v5.69l-1.72-1.72a.75.75 0 00-1.06 1.06l3 3z" clip-rule="evenodd" />
                                                    </svg>
                                                </button>
                                            </div>
                                        {% endif %}
                                    </div>

                                    <div>
                                        <button
                                                data-action="live#action"
                                                data-action-name="removeElement(elementId={{ elementForm.vars.value.id }})"
                                                type="button"
                                        >
                                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="pt-1 pb-1 text-red-600 w-8 h-8">
                                                <path stroke-linecap="round" stroke-linejoin="round" d="M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                                            </svg>
                                        </button>
                                    </div>
                                </div>

                            {% endif %}

                        </div>

                    {% endfor %}

                    {% do form.presentationpageTemplateElements.setRendered %}

                    {% if form.vars.valid %}
                        <button
                                class="cta-link-primary mb-4 w-52"
                                data-action="live#action"
                                data-action-name="addElement(variant={{ constant('\\App\\Entity\\Feature\\PresentationpageTemplates\\PresentationpageTemplateElementVariant::Headline').value }})"
                                type="button"
                        >
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v18m9-9H3" />
                            </svg>
                            {{ 'feature.presentationpage_templates.editor.edit_form.cta_add_element.headline'|trans }}
                        </button>

                        <button
                                class="cta-link-primary mb-4 w-52"
                                data-action="live#action"
                                data-action-name="addElement(variant={{ constant('\\App\\Entity\\Feature\\PresentationpageTemplates\\PresentationpageTemplateElementVariant::Paragraph').value }})"
                                type="button"
                        >
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v18m9-9H3" />
                            </svg>
                            {{ 'feature.presentationpage_templates.editor.edit_form.cta_add_element.paragraph'|trans }}
                        </button>

                        <button
                                class="cta-link-primary mb-4 w-52"
                                data-action="live#action"
                                data-action-name="addElement(variant={{ constant('\\App\\Entity\\Feature\\PresentationpageTemplates\\PresentationpageTemplateElementVariant::ImageUrl').value }})"
                                type="button"
                        >
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v18m9-9H3" />
                            </svg>
                            {{ 'feature.presentationpage_templates.editor.edit_form.cta_add_element.image_url'|trans }}
                        </button>

                        <button
                                class="cta-link-primary mb-4 w-52"
                                data-action="live#action"
                                data-action-name="addElement(variant={{ constant('\\App\\Entity\\Feature\\PresentationpageTemplates\\PresentationpageTemplateElementVariant::CalendlyEmbed').value }})"
                                type="button"
                        >
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v18m9-9H3" />
                            </svg>
                            {{ 'feature.presentationpage_templates.editor.edit_form.cta_add_element.calendly_embed'|trans }}
                        </button>
                    {% endif %}

                </div>




                <button class="cta-link-success">
                    <svg xmlns="http://www.w3.org/2000/svg" class=heroicon-next-to-text fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4" />
                    </svg>
                    {{ 'feature.presentationpage_templates.editor.edit_form.save_button'|trans }}
                </button>

                {{ form_end(form) }}
            </div>

        {% endblock %}


        {% block contentRight %}

            <div class="mb-8 font-bold text-xl">
                {{ 'feature.presentationpage_templates.editor.edit_form.preview_headline'|trans }}
            </div>

            {% if this.presentationpageTemplate.presentationpageTemplateElements.count is same as 0 %}

                {{ 'feature.presentationpage_templates.editor.edit_form.preview_note_no_elements'|trans }}

            {% else %}

                <div
                        class="rounded-lg p-4 shadow-inner"
                        style="background-color: {{ this.presentationpageTemplate.bgColor }}; color: {{ this.presentationpageTemplate.textColor }};"
                >
                    <div
                            class="font-bold p-4"
                    >
                        {% for element in this.presentationpageTemplate.presentationpageTemplateElements %}
                            {# @var element \App\Entity\Feature\PresentationpageTemplates\PresentationpageTemplateElement #}

                            {% if element.elementVariant.value is same as constant('\\App\\Entity\\Feature\\PresentationpageTemplates\\PresentationpageTemplateElementVariant::Headline').value %}
                                <h2 class="text-lg">
                                    {{ element.textContent }}
                                </h2>
                            {% endif %}

                            {% if element.elementVariant.value is same as constant('\\App\\Entity\\Feature\\PresentationpageTemplates\\PresentationpageTemplateElementVariant::Paragraph').value %}
                                <p class="mb-2">
                                    {{ element.textContent }}
                                </p>
                            {% endif %}

                            {% if element.elementVariant.value is same as constant('\\App\\Entity\\Feature\\PresentationpageTemplates\\PresentationpageTemplateElementVariant::ImageUrl').value %}
                                <p class="mb-2">
                                    <img src="{{ element.textContent }}">
                                </p>
                            {% endif %}

                            {% if element.elementVariant.value is same as constant('\\App\\Entity\\Feature\\PresentationpageTemplates\\PresentationpageTemplateElementVariant::CalendlyEmbed').value %}
                                <p class="mb-2">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="ml-0 pl-0 h-32 w-32" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                                    </svg>
                                </p>
                            {% endif %}
                        {% endfor %}
                    </div>
                </div>

            {% endif %}


        {% endblock %}
    {% endembed %}

</div>
