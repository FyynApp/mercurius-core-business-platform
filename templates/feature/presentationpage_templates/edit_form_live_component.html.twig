{# @var this \App\Components\Feature\PresentationpageTemplates\PresentationspageTemplateEditFormLiveComponent #}
<div {{ attributes }}>

    {% embed 'embeds/two_column_content_box_content_row.html.twig' with { odd: false, colspanLeft: 7, colspanRight: 5 } %}

        {% block contentLeft %}

            <div class="mb-16">
                <div class="mb-8 font-bold text-xl">
                    {{ 'feature.presentationpage_templates.editor.edit_form.form_headline'|trans }}
                </div>


                <div class="mb-8">
                    {% form_theme form 'form_themes/form_theme_default.html.twig' %}

                    {{ form_start(form) }}


                    {{ form_row(form.title, {
                        attr: {
                            'data-model': 'on(input)|debounce(250)|' ~ form.title.vars.full_name,
                            'data-action': 'live#action',
                            'data-action-name': "debounce(300)|save"
                        },
                        label: 'feature.presentationpage_templates.editor.edit_form.label_title'|trans
                    }) }}

                    {{ form_row(form.bgColor, {
                        attr: {
                            'data-model': 'on(input)|debounce(250)|' ~ form.bgColor.vars.full_name
                        },
                        label: 'feature.presentationpages_templates.editor.edit_form.label_bg_color'|trans
                    }) }}

                    {{ form_row(form.textColor, {
                        attr: {
                            'data-model': 'on(input)|debounce(250)|' ~ form.textColor.vars.full_name
                        },
                        label: 'feature.presentationpages_templates.editor.edit_form.label_text_color'|trans
                    }) }}


                    <h3>Elements:</h3>
                    {% for key, elementForm in form.presentationpageTemplateElements %}
                        {% if form.vars.valid %}
                            <button
                                    data-action="live#action"
                                    data-action-name="removeElement(index={{ key }}, elementId={{ elementForm.vars.value.id }})"
                                    type="button"
                            >Delete</button>
                        {% endif %}

                        {{ form_widget(elementForm) }}
                    {% endfor %}

                    {% do form.presentationpageTemplateElements.setRendered %}

                    {% if form.vars.valid %}
                        <button
                                data-action="live#action"
                                data-action-name="addElement(variant={{ constant('\\App\\Entity\\Feature\\PresentationpageTemplates\\PresentationpageTemplateElementVariant::Headline').value }})"
                                type="button"
                        >+ Add headline</button>

                        <button
                                data-action="live#action"
                                data-action-name="addElement(variant={{ constant('\\App\\Entity\\Feature\\PresentationpageTemplates\\PresentationpageTemplateElementVariant::Paragraph').value }})"
                                type="button"
                        >+ Add paragraph</button>
                    {% endif %}

                </div>




                <button class="button-success">
                        <svg xmlns="http://www.w3.org/2000/svg" class=heroicon-next-to-text fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4" />
                        </svg>
                        {{ 'feature.presentationpage_templates.editor.edit_form.save_button'|trans }}
                    </button>

                    {{ form_end(form) }}
                </div>
            </div>

        {% endblock %}


        {% block contentRight %}

            <div class="mb-8 font-bold text-xl">
                {{ 'feature.presentationpage_templates.editor.edit_form.preview_headline'|trans }}
            </div>

            <div
                    class="rounded-lg p-4 shadow-inner"
                    style="background-color: {{ this.presentationpageTemplate.bgColor }}; color: {{ this.presentationpageTemplate.textColor }};"
            >
                <div
                        class="text-lg font-bold p-4"
                >
                    {% if this.presentationpageTemplate.title is empty %}
                        {{ 'feature.presentationpage_templates.editor.edit_form.title_placeholder'|trans }}
                    {% else %}
                        {{ this.presentationpageTemplate.title }}
                    {% endif %}
                </div>
            </div>

        {% endblock %}
    {% endembed %}

</div>
