{# @var this \App\Components\Feature\PresentationpageTemplates\PresentationspageTemplateEditFormLiveComponent #}
<div {{ attributes }}>

    {% embed 'embeds/two_column_content_box_content_row.html.twig' with { odd: false, colspanLeft: 7, colspanRight: 5 } %}

        {% block contentLeft %}

            <div class="mb-16">
                <div class="mb-8 font-bold text-xl">
                    {{ 'feature.presentationpage_templates.editor.edit_form.form_headline'|trans }}
                </div>


                <div class="mb-8">
                    <h2 class="text-lg mt-8 mb-4">
                        {{ 'feature.presentationpage_templates.editor.edit_form.subheadline_basesettings'|trans }}
                    </h2>

                    {% form_theme form 'form_themes/form_theme_default.html.twig' %}

                    {{ form_start(form) }}


                    {{ form_row(form.title, {
                        attr: {
                            'data-model': 'on(input)|debounce(250)|' ~ form.title.vars.full_name,
                            'data-action': 'live#action',
                            'data-action-name': "debounce(300)|save"
                        }
                    }) }}

                    {{ form_row(form.bgColor, {
                        attr: {
                            'data-model': 'on(input)|debounce(250)|' ~ form.bgColor.vars.full_name,
                            'data-action': 'live#action',
                            'data-action-name': "debounce(300)|save"
                        }
                    }) }}

                    {{ form_row(form.textColor, {
                        attr: {
                            'data-model': 'on(input)|debounce(250)|' ~ form.textColor.vars.full_name,
                            'data-action': 'live#action',
                            'data-action-name': "debounce(300)|save"
                        }
                    }) }}


                    <h2 class="text-lg mt-8 mb-4">
                        {{ 'feature.presentationpage_templates.editor.edit_form.subheadline_elements'|trans }}
                    </h2>

                    {% for key, elementForm in form.presentationpageTemplateElements %}

                        {% for elementFormRow in elementForm %}

                            {% if elementFormRow.vars.name is same as 'position' %}
                                {{ form_row(elementFormRow) }}
                            {% else %}
                                <div class="mb-6">
                                    {{ form_label(elementFormRow) }}

                                    <div class="flex flex-row justify-start items-end">
                                        <div>
                                            {{ form_widget(elementFormRow, {
                                                attr: {
                                                    'data-model': 'on(input)|debounce(250)|' ~ elementFormRow.vars.full_name,
                                                    'data-action': 'live#action',
                                                    'data-action-name': "debounce(300)|save"
                                                }
                                            }) }}
                                        </div>

                                        <div>
                                            {% if form.vars.valid %}
                                                <button
                                                        data-action="live#action"
                                                        data-action-name="removeElement(index={{ key }}, elementId={{ elementForm.vars.value.id }})"
                                                        type="button"
                                                >
                                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="ml-1 pt-1 pb-1 text-red-600 w-8 h-8">
                                                        <path stroke-linecap="round" stroke-linejoin="round" d="M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                                                    </svg>
                                                </button>
                                            {% endif %}

                                        </div>
                                    </div>


                                    {{ form_help(elementFormRow) }}
                                    {{ form_errors(elementFormRow) }}
                                </div>
                            {% endif %}

                        {% endfor %}

                    {% endfor %}

                    {% do form.presentationpageTemplateElements.setRendered %}

                    {% if form.vars.valid %}
                        <button
                                class="cta-link-primary mb-4"
                                data-action="live#action"
                                data-action-name="addElement(variant={{ constant('\\App\\Entity\\Feature\\PresentationpageTemplates\\PresentationpageTemplateElementVariant::Headline').value }})"
                                type="button"
                        >
                            {{ 'feature.presentationpage_templates.editor.edit_form.cta_add_element.headline'|trans }}
                        </button>

                        <button
                                class="cta-link-primary mb-4"
                                data-action="live#action"
                                data-action-name="addElement(variant={{ constant('\\App\\Entity\\Feature\\PresentationpageTemplates\\PresentationpageTemplateElementVariant::Paragraph').value }})"
                                type="button"
                        >
                            {{ 'feature.presentationpage_templates.editor.edit_form.cta_add_element.paragraph'|trans }}
                        </button>

                        <button
                                class="cta-link-primary mb-4"
                                data-action="live#action"
                                data-action-name="addElement(variant={{ constant('\\App\\Entity\\Feature\\PresentationpageTemplates\\PresentationpageTemplateElementVariant::CalendlyEmbed').value }})"
                                type="button"
                        >
                            {{ 'feature.presentationpage_templates.editor.edit_form.cta_add_element.calendly_embed'|trans }}
                        </button>
                    {% endif %}

                </div>




                <button class="button-success">
                    <svg xmlns="http://www.w3.org/2000/svg" class=heroicon-next-to-text fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4" />
                    </svg>
                    {{ 'feature.presentationpage_templates.editor.edit_form.save_button'|trans }}
                </button>

                {{ form_end(form) }}
            </div>

        {% endblock %}


        {% block contentRight %}

            <div class="mb-8 font-bold text-xl">
                {{ 'feature.presentationpage_templates.editor.edit_form.preview_headline'|trans }}
            </div>

            <div
                    class="rounded-lg p-4 shadow-inner"
                    style="background-color: {{ this.presentationpageTemplate.bgColor }}; color: {{ this.presentationpageTemplate.textColor }};"
            >
                <div
                        class="font-bold p-4"
                >
                    {% for element in this.presentationpageTemplate.presentationpageTemplateElements %}
                        {# @var element \App\Entity\Feature\PresentationpageTemplates\PresentationpageTemplateElement #}

                        {% if element.elementVariant.value is same as constant('\\App\\Entity\\Feature\\PresentationpageTemplates\\PresentationpageTemplateElementVariant::Headline').value %}
                            <h2 class="text-lg">
                                {{ element.textContent }}
                            </h2>
                        {% endif %}

                        {% if element.elementVariant.value is same as constant('\\App\\Entity\\Feature\\PresentationpageTemplates\\PresentationpageTemplateElementVariant::Paragraph').value %}
                            <p class="mb-2">
                                {{ element.textContent }}
                            </p>
                        {% endif %}
                        {% if element.elementVariant.value is same as constant('\\App\\Entity\\Feature\\PresentationpageTemplates\\PresentationpageTemplateElementVariant::CalendlyEmbed').value %}
                            <p class="mb-2">
                                <svg xmlns="http://www.w3.org/2000/svg" class="ml-0 pl-0 h-32 w-32" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                                </svg>
                            </p>
                        {% endif %}
                    {% endfor %}
                </div>
            </div>

        {% endblock %}
    {% endembed %}

</div>
