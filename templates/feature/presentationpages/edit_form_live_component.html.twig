{# @var this \App\Components\Feature\Presentationpages\PresentationspageEditFormLiveComponent #}
<div {{ attributes }}>

    {% embed 'embeds/two_column_content_box_content_row.html.twig' with { odd: false, colspanLeft: 7, colspanRight: 5 } %}

        {% block contentLeft %}

            <div class="mb-16">
                <div class="mb-8 font-bold text-xl">
                    {{ 'feature.presentationpages.editor.edit_form.form_headline'|trans }}
                </div>


                <div class="mb-8">
                    <h2 class="text-lg mt-8 mb-4">
                        {{ 'feature.presentationpages.editor.edit_form.subheadline_basesettings'|trans }}
                    </h2>

                    {% form_theme form 'form_themes/form_theme_default.html.twig' %}

                    {{ form_start(form) }}


                    {{ form_row(form.title, {
                        attr: {
                            'data-model': 'on(input)|debounce(250)|' ~ form.title.vars.full_name,
                            'data-action': 'live#action',
                            'data-action-name': "debounce(300)|save"
                        }
                    }) }}

                    {{ form_row(form.bgColor, {
                        attr: {
                            'data-model': 'on(input)|debounce(250)|' ~ form.bgColor.vars.full_name,
                            'data-action': 'live#action',
                            'data-action-name': "debounce(300)|save"
                        }
                    }) }}

                    {{ form_row(form.textColor, {
                        attr: {
                            'data-model': 'on(input)|debounce(250)|' ~ form.textColor.vars.full_name,
                            'data-action': 'live#action',
                            'data-action-name': "debounce(300)|save"
                        }
                    }) }}


                    <h2 class="text-lg mt-8 mb-4">
                        {{ 'feature.presentationpages.editor.edit_form.subheadline_elements'|trans }}
                    </h2>

                    {% for elementForm in form.presentationpageElements %}

                        {% set presentationpageElement = elementForm.vars.value %}

                        {# @var presentationpageElement \App\Entity\Feature\Presentationpages\PresentationpageElement #}

                        <div class="flex flex-row justify-start items-start p-4 pt-8 bg-indigo-50 mb-8 rounded-lg">

                            <div class="w-full mr-8">

                                {% if presentationpageElement.elementVariant is same as constant('\\App\\Entity\\Feature\\Presentationpages\\PresentationpageElementVariant::MercuriusVideo') %}
                                    <p class="font-bold">
                                        {{ 'feature.presentationpages.editor.edit_form.label_element_variant.mercurius_video'|trans }}
                                    </p>
                                    <p class="max-w-md">
                                        {{ 'feature.presentationpages.editor.edit_form.label_element_variant.mercurius_video_note'|trans }}
                                    </p>
                                {% endif %}

                                {% for elementFormRow in elementForm %}

                                    {% if elementFormRow.vars.name is same as 'position' %}
                                        {{ form_row(elementFormRow) }}
                                    {% else %}
                                        <div class="mb-6">
                                            {{ form_label(elementFormRow) }}

                                            <div class="w-full">
                                                {{ form_widget(elementFormRow, {
                                                    attr: {
                                                        'data-model': 'on(input)|debounce(250)|' ~ elementFormRow.vars.full_name,
                                                        'data-action': 'live#action',
                                                        'data-action-name': "debounce(300)|save"
                                                    }
                                                }) }}
                                            </div>

                                            {{ form_help(elementFormRow) }}
                                            {{ form_errors(elementFormRow) }}
                                        </div>
                                    {% endif %}

                                {% endfor %}
                            </div>

                            {% if form.vars.valid %}

                                <div class="flex flex-row justify-end items-start w-20">
                                    <div class="flex flex-col justify-end">
                                        {% if elementForm.vars.value.position is not same as 0 %}
                                            <div>
                                                <button
                                                        class="p-0 ml-1 mr-0"
                                                        data-action="live#action"
                                                        data-action-name="moveElementUp(elementId={{ elementForm.vars.value.id }})"
                                                        type="button"
                                                >
                                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="ml-1 pt-1 pb-1 w-8 h-8">
                                                        <path fill-rule="evenodd" d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm.53 5.47a.75.75 0 00-1.06 0l-3 3a.75.75 0 101.06 1.06l1.72-1.72v5.69a.75.75 0 001.5 0v-5.69l1.72 1.72a.75.75 0 101.06-1.06l-3-3z" clip-rule="evenodd" />
                                                    </svg>
                                                </button>
                                            </div>
                                        {% endif %}

                                        {% if elementForm.vars.value.position is not same as (form.presentationpageElements|length - 1) %}
                                            <div>
                                                <button
                                                        class="p-0 ml-1 mr-0"
                                                        data-action="live#action"
                                                        data-action-name="moveElementDown(elementId={{ elementForm.vars.value.id }})"
                                                        type="button"
                                                        title=""
                                                >
                                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="ml-1 mr-0 pt-1 pb-1 w-8 h-8">
                                                        <path fill-rule="evenodd" d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm-.53 14.03a.75.75 0 001.06 0l3-3a.75.75 0 10-1.06-1.06l-1.72 1.72V8.25a.75.75 0 00-1.5 0v5.69l-1.72-1.72a.75.75 0 00-1.06 1.06l3 3z" clip-rule="evenodd" />
                                                    </svg>
                                                </button>
                                            </div>
                                        {% endif %}
                                    </div>

                                    <div>
                                        <button
                                                data-action="live#action"
                                                data-action-name="removeElement(elementId={{ elementForm.vars.value.id }})"
                                                type="button"
                                        >
                                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="pt-1 pb-1 text-red-600 w-8 h-8">
                                                <path stroke-linecap="round" stroke-linejoin="round" d="M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                                            </svg>
                                        </button>
                                    </div>
                                </div>

                            {% endif %}

                        </div>

                    {% endfor %}

                    {% do form.presentationpageElements.setRendered %}

                    {% if form.vars.valid %}

                        {% if not this.presentationpage.hasMercuriusVideoVariantElement %}
                            <button
                                    class="cta-link-primary mb-4 w-52"
                                    data-action="live#action"
                                    data-action-name="addElement(variant={{ constant('\\App\\Entity\\Feature\\Presentationpages\\PresentationpageElementVariant::MercuriusVideo').value }})"
                                    type="button"
                            >
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v18m9-9H3" />
                                </svg>
                                {{ 'feature.presentationpages.editor.edit_form.cta_add_element.mercurius_video'|trans }}
                            </button>
                        {% endif %}

                        <button
                                class="cta-link-primary mb-4 w-52"
                                data-action="live#action"
                                data-action-name="addElement(variant={{ constant('\\App\\Entity\\Feature\\Presentationpages\\PresentationpageElementVariant::Headline').value }})"
                                type="button"
                        >
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v18m9-9H3" />
                            </svg>
                            {{ 'feature.presentationpages.editor.edit_form.cta_add_element.headline'|trans }}
                        </button>

                        <button
                                class="cta-link-primary mb-4 w-52"
                                data-action="live#action"
                                data-action-name="addElement(variant={{ constant('\\App\\Entity\\Feature\\Presentationpages\\PresentationpageElementVariant::Paragraph').value }})"
                                type="button"
                        >
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v18m9-9H3" />
                            </svg>
                            {{ 'feature.presentationpages.editor.edit_form.cta_add_element.paragraph'|trans }}
                        </button>

                        <button
                                class="cta-link-primary mb-4 w-52"
                                data-action="live#action"
                                data-action-name="addElement(variant={{ constant('\\App\\Entity\\Feature\\Presentationpages\\PresentationpageElementVariant::ImageUrl').value }})"
                                type="button"
                        >
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v18m9-9H3" />
                            </svg>
                            {{ 'feature.presentationpages.editor.edit_form.cta_add_element.image_url'|trans }}
                        </button>

                        <button
                                class="cta-link-primary mb-4 w-52"
                                data-action="live#action"
                                data-action-name="addElement(variant={{ constant('\\App\\Entity\\Feature\\Presentationpages\\PresentationpageElementVariant::CalendlyEmbed').value }})"
                                type="button"
                        >
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v18m9-9H3" />
                            </svg>
                            {{ 'feature.presentationpages.editor.edit_form.cta_add_element.calendly_embed'|trans }}
                        </button>
                    {% endif %}

                </div>


                <button class="cta-link-success">
                    <svg xmlns="http://www.w3.org/2000/svg" class=heroicon-next-to-text fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4" />
                    </svg>
                    {{ 'feature.presentationpages.editor.edit_form.save_button'|trans }}
                </button>

                {{ form_end(form) }}
            </div>

        {% endblock %}


        {% block contentRight %}

            <div class="sm:fixed sm:top-16 bg-gray-100 p-8 rounded-l-lg shadow shadow-2xl shadow-gray-700 h-full overflow-scroll">

                <h1 class="mb-6 font-bold text-xl">
                    {{ 'feature.presentationpages.editor.edit_form.preview_headline'|trans }}
                </h1>

                {% if this.presentationpage.presentationpageElements.count is same as 0 %}

                    <p>
                        {{ 'feature.presentationpages.editor.edit_form.preview_note_no_elements'|trans }}
                    </p>

                {% else %}

                    <p class="mb-6">
                        {{ 'feature.presentationpages.editor.edit_form.preview_note'|trans }}
                    </p>

                    <p class="mb-2">
                        {{ 'feature.presentationpages.editor.edit_form.preview_full_note'|trans }}
                    </p>
                    <p class="mb-6">
                        <a
                                class="cta-link-primary"
                                target="_blank"
                                href="{{ path('feature.presentationpages.preview', { presentationpageId: this.presentationpage.id }) }}"
                        >
                            {{ 'feature.presentationpages.editor.edit_form.preview_full_note_cta'|trans }}
                        </a>
                    </p>

                    <div
                            class="flex flex-col rounded-lg p-4 shadow-inner text-center justify-center items-center"
                            style="background-color: {{ this.presentationpage.bgColor }}; color: {{ this.presentationpage.textColor }};"
                    >
                        <div
                                class="font-bold p-4"
                        >
                            {% for element in this.presentationpage.presentationpageElements %}
                                {# @var element \App\Entity\Feature\Presentationpages\PresentationpageElement #}

                                {% if element.elementVariant is same as constant('\\App\\Entity\\Feature\\Presentationpages\\PresentationpageElementVariant::MercuriusVideo') %}
                                    <div class="text-lg">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="mx-auto h-32 w-32" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 01-1.125-1.125M3.375 19.5h1.5C5.496 19.5 6 18.996 6 18.375m-3.75 0V5.625m0 12.75v-1.5c0-.621.504-1.125 1.125-1.125m18.375 2.625V5.625m0 12.75c0 .621-.504 1.125-1.125 1.125m1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125m0 3.75h-1.5A1.125 1.125 0 0118 18.375M20.625 4.5H3.375m17.25 0c.621 0 1.125.504 1.125 1.125M20.625 4.5h-1.5C18.504 4.5 18 5.004 18 5.625m3.75 0v1.5c0 .621-.504 1.125-1.125 1.125M3.375 4.5c-.621 0-1.125.504-1.125 1.125M3.375 4.5h1.5C5.496 4.5 6 5.004 6 5.625m-3.75 0v1.5c0 .621.504 1.125 1.125 1.125m0 0h1.5m-1.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125m1.5-3.75C5.496 8.25 6 7.746 6 7.125v-1.5M4.875 8.25C5.496 8.25 6 8.754 6 9.375v1.5m0-5.25v5.25m0-5.25C6 5.004 6.504 4.5 7.125 4.5h9.75c.621 0 1.125.504 1.125 1.125m1.125 2.625h1.5m-1.5 0A1.125 1.125 0 0118 7.125v-1.5m1.125 2.625c-.621 0-1.125.504-1.125 1.125v1.5m2.625-2.625c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125M18 5.625v5.25M7.125 12h9.75m-9.75 0A1.125 1.125 0 016 10.875M7.125 12C6.504 12 6 12.504 6 13.125m0-2.25C6 11.496 5.496 12 4.875 12M18 10.875c0 .621-.504 1.125-1.125 1.125M18 10.875c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125m-12 5.25v-5.25m0 5.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125m-12 0v-1.5c0-.621-.504-1.125-1.125-1.125M18 18.375v-5.25m0 5.25v-1.5c0-.621.504-1.125 1.125-1.125M18 13.125v1.5c0 .621.504 1.125 1.125 1.125M18 13.125c0-.621.504-1.125 1.125-1.125M6 13.125v1.5c0 .621-.504 1.125-1.125 1.125M6 13.125C6 12.504 5.496 12 4.875 12m-1.5 0h1.5m-1.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125M19.125 12h1.5m0 0c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h1.5m14.25 0h1.5" />
                                        </svg>
                                    </div>
                                {% endif %}

                                {% if element.elementVariant is same as constant('\\App\\Entity\\Feature\\Presentationpages\\PresentationpageElementVariant::Headline') %}
                                    <h2 class="text-lg mt-12 first:mt-0">
                                        {{ element.textContent }}
                                    </h2>
                                {% endif %}

                                {% if element.elementVariant is same as constant('\\App\\Entity\\Feature\\Presentationpages\\PresentationpageElementVariant::Paragraph') %}
                                    <p class="mb-2">
                                        {{ element.textContent }}
                                    </p>
                                {% endif %}

                                {% if element.elementVariant is same as constant('\\App\\Entity\\Feature\\Presentationpages\\PresentationpageElementVariant::ImageUrl') %}
                                    <div class="mb-2 w-36 mx-auto">
                                        <img
                                                class="rounded-md"
                                                src="{{ element.textContent }}"
                                        >
                                    </div>
                                {% endif %}

                                {% if element.elementVariant is same as constant('\\App\\Entity\\Feature\\Presentationpages\\PresentationpageElementVariant::CalendlyEmbed') %}
                                    <div class="mb-2">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="mx-auto h-32 w-32" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                                        </svg>
                                    </div>
                                {% endif %}
                            {% endfor %}
                        </div>
                    </div>

                {% endif %}

                {# this ensures that the preview pane goes all the way to the right, even if elements are thin #}
                &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;

            </div>

        {% endblock %}
    {% endembed %}

</div>
